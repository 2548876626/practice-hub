<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­—åˆ—è¡¨æ¢è¡Œæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #2c3e50;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #34495e;
            padding: 20px;
            border-radius: 12px;
        }
        .calculation-solution {
            margin-top: 20px;
            padding: 20px;
            background: rgba(40, 167, 69, 0.08);
            border-radius: 12px;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .calculation-solution h4 {
            font-size: 18px;
            font-weight: 600;
            color: #28a745;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .calculation-solution h4::before {
            content: "ğŸ’¡";
            font-size: 20px;
        }
        .calculation-steps {
            font-size: 15px;
            line-height: 1.8;
            margin-bottom: 15px;
            padding: 18px;
            background: #2c3e50;
            border-radius: 10px;
            border: 1px solid #4a5f7a;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .before, .after {
            padding: 15px;
            border-radius: 8px;
        }
        .before {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        .after {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        h3 {
            color: #ffd700;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æ•°å­—åˆ—è¡¨æ¢è¡Œä¿®å¤æµ‹è¯•</h1>
        
        <div class="comparison">
            <div class="before">
                <h3>âŒ ä¿®å¤å‰ï¼ˆé—®é¢˜ç‰ˆæœ¬ï¼‰</h3>
                <div class="calculation-solution">
                    <h4>è¯¦ç»†è§£ç­”</h4>
                    <div class="calculation-steps" id="beforeFix">
                        <!-- ä¿®å¤å‰çš„æ•ˆæœ -->
                    </div>
                </div>
            </div>
            
            <div class="after">
                <h3>âœ… ä¿®å¤åï¼ˆæ”¹è¿›ç‰ˆæœ¬ï¼‰</h3>
                <div class="calculation-solution">
                    <h4>è¯¦ç»†è§£ç­”</h4>
                    <div class="calculation-steps" id="afterFix">
                        <!-- ä¿®å¤åçš„æ•ˆæœ -->
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border: 1px solid rgba(255, 193, 7, 0.3);">
            <h3>ğŸ’¡ ä¿®å¤è¯´æ˜</h3>
            <ul>
                <li><strong>é—®é¢˜</strong>ï¼šé•¿æ–‡æœ¬æ©ç›–äº†æ¢è¡Œæ•ˆæœï¼Œæ•°å­—æ¡ç›®ä¸å¤Ÿçªå‡º</li>
                <li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¸ºæ•°å­—æ¡ç›®æ·»åŠ é¢å¤–é—´è·å’Œæ ·å¼çªå‡ºæ˜¾ç¤º</li>
                <li><strong>æŠ€æœ¯å®ç°</strong>ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ <code>/\\n(\d+\.)/g</code> åŒ¹é…æ•°å­—æ¡ç›®</li>
                <li><strong>æ ·å¼å¢å¼º</strong>ï¼šæ·»åŠ åŒæ¢è¡Œã€é‡‘è‰²é«˜äº®ã€ç²—ä½“æ˜¾ç¤º</li>
            </ul>
        </div>
    </div>

    <script>
        // æµ‹è¯•æ•°æ®
        const testText = "å˜å‹å™¨å¹¶åˆ—è¿è¡Œçš„æ¡ä»¶ï¼š\\n1. å˜å‹å™¨çš„æ¥çº¿ç»„åˆ«å¿…é¡»ç›¸åŒï¼Œä»¥ç¡®ä¿äºŒæ¬¡ä¾§ç”µå‹ç›¸ä½ä¸€è‡´ï¼Œé¿å…äº§ç”Ÿå¤§çš„ç”µä½å·®å’Œç¯æµã€‚\\n2. å˜å‹å™¨çš„å˜æ¯”ï¼ˆå³é¢å®šç”µå‹ï¼‰åº”ç›¸åŒï¼Œå…è®¸æœ‰Â±0.5%çš„å·®å€¼ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯ç©ºè½½æ—¶ç»•ç»„å†…ä¸ä¼šæœ‰ç¯æµï¼Œé¿å…å½±å“å˜å‹å™¨å®¹é‡çš„åˆç†åˆ©ç”¨ã€‚\\n3. å˜å‹å™¨çš„çŸ­è·¯ç”µå‹åº”ç›¸ç­‰ï¼Œå…è®¸æœ‰Â±10%çš„å·®å€¼ï¼Œè¿™ä¸ªæ¡ä»¶ä¿è¯è´Ÿè·åˆ†é…ä¸å®¹é‡æˆæ­£æ¯”ï¼Œé¿å…å®¹é‡å¤§çš„å˜å‹å™¨è½»è½½ï¼Œå®¹é‡å°çš„å˜å‹å™¨è¿‡è½½ã€‚\\n4. å¹¶åˆ—å˜å‹å™¨çš„å®¹é‡æ¯”ä¸å®œè¶…è¿‡3:1ï¼Œè¿™é™åˆ¶äº†å˜å‹å™¨çš„çŸ­è·¯ç”µå‹å€¼ç›¸å·®ä¸è‡´è¿‡å¤§ï¼Œé˜²æ­¢è´Ÿè½½åˆ†é…ä¸å‡ã€‚";

        // ä¿®å¤å‰çš„å‡½æ•°ï¼ˆåŸç‰ˆæœ¬ï¼‰
        function oldFormatTextWithLineBreaks(text) {
            return text.replace(/\\n/g, '<br>');
        }

        // ä¿®å¤åçš„å‡½æ•°ï¼ˆæ–°ç‰ˆæœ¬ï¼‰
        function newFormatTextWithLineBreaks(text) {
            return text
                .replace(/\\n(\d+\.)/g, '<br><br><strong style="color: #ffd700; display: block; margin-top: 8px;">$1</strong>')
                .replace(/\\n/g, '<br>');
        }

        // æ˜¾ç¤ºå¯¹æ¯”æ•ˆæœ
        document.getElementById('beforeFix').innerHTML = oldFormatTextWithLineBreaks(testText);
        document.getElementById('afterFix').innerHTML = newFormatTextWithLineBreaks(testText);

        console.log('æ•°å­—åˆ—è¡¨æ¢è¡Œæµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
    </script>
</body>
</html>
