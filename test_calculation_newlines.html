<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¡ç®—é¢˜æ¢è¡Œç¬¦æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .calculation-container {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
        }
        .calculation-title {
            font-size: 22px;
            font-weight: 600;
            color: #f2c744;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #34495e;
        }
        .calculation-problem {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 20px;
            padding: 18px;
            background: rgba(102, 126, 234, 0.08);
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        .calculation-solution {
            margin-top: 20px;
            padding: 20px;
            background: rgba(40, 167, 69, 0.08);
            border-radius: 12px;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        .calculation-solution h4 {
            font-size: 18px;
            font-weight: 600;
            color: #28a745;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .calculation-solution h4::before {
            content: "ğŸ’¡";
            font-size: 20px;
        }
        .calculation-steps {
            font-size: 15px;
            line-height: 1.8;
            margin-bottom: 15px;
            padding: 18px;
            background: #34495e;
            border-radius: 10px;
            border: 1px solid #4a5f7a;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .code {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§® è®¡ç®—é¢˜æ¢è¡Œç¬¦å¤„ç†æµ‹è¯•</h1>
        <p>æµ‹è¯•è®¡ç®—é¢˜ä¸­çš„æ¢è¡Œç¬¦æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºä¸ºæ¢è¡Œ</p>

        <!-- æµ‹è¯•æ•°æ®å±•ç¤º -->
        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•æ•°æ®</h3>
            <div class="code" id="testDataDisplay"></div>
        </div>

        <!-- é—®é¢˜æ¼”ç¤º -->
        <div class="test-section">
            <h3>âŒ é—®é¢˜æ¼”ç¤ºï¼šä¸å¤„ç†æ¢è¡Œç¬¦</h3>
            <div class="calculation-container">
                <div class="calculation-title">è®¡ç®—é¢˜</div>
                <div class="calculation-problem" id="problemWithoutFix">
                    <!-- è¿™é‡Œæ˜¾ç¤ºæœªå¤„ç†çš„æ–‡æœ¬ -->
                </div>
                <div class="calculation-solution">
                    <h4>è¯¦ç»†è§£ç­”</h4>
                    <div class="calculation-steps" id="solutionWithoutFix">
                        <!-- è¿™é‡Œæ˜¾ç¤ºæœªå¤„ç†çš„æ–‡æœ¬ -->
                    </div>
                </div>
            </div>
            <div class="error">âŒ æ¢è¡Œç¬¦æ˜¾ç¤ºä¸ºæ–‡å­—ï¼Œæ²¡æœ‰å®é™…æ¢è¡Œæ•ˆæœ</div>
        </div>

        <!-- è§£å†³æ–¹æ¡ˆæ¼”ç¤º -->
        <div class="test-section">
            <h3>âœ… è§£å†³æ–¹æ¡ˆï¼šæ­£ç¡®å¤„ç†æ¢è¡Œç¬¦</h3>
            <div class="calculation-container">
                <div class="calculation-title">è®¡ç®—é¢˜</div>
                <div class="calculation-problem" id="problemWithFix">
                    <!-- è¿™é‡Œæ˜¾ç¤ºå¤„ç†åçš„æ–‡æœ¬ -->
                </div>
                <div class="calculation-solution">
                    <h4>è¯¦ç»†è§£ç­”</h4>
                    <div class="calculation-steps" id="solutionWithFix">
                        <!-- è¿™é‡Œæ˜¾ç¤ºå¤„ç†åçš„æ–‡æœ¬ -->
                    </div>
                </div>
            </div>
            <div class="success">âœ… æ¢è¡Œç¬¦æ­£ç¡®è½¬æ¢ä¸ºæ¢è¡Œï¼Œæ˜¾ç¤ºæ•ˆæœæ­£å¸¸</div>
        </div>

        <!-- å®é™…æ•°æ®æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸš€ å®é™…æ•°æ®æµ‹è¯•</h3>
            <div id="realDataTest">
                <!-- è¿™é‡Œä¼šæ˜¾ç¤ºå®é™…çš„è®¡ç®—é¢˜æ•°æ® -->
            </div>
        </div>

        <!-- ä»£ç è¯´æ˜ -->
        <div class="test-section">
            <h3>ğŸ’» ä»£ç å®ç°</h3>
            <div class="code">
                <strong>å·¥å…·å‡½æ•°ï¼š</strong><br>
                <pre>function formatTextWithLineBreaks(text, useHTML = true) {
    if (!text || typeof text !== 'string') return '';
    
    if (useHTML) {
        return text.replace(/\\n/g, '&lt;br&gt;');
    } else {
        return text.replace(/\\n/g, '\n');
    }
}</pre>
            </div>
            <div class="code">
                <strong>ä½¿ç”¨æ–¹å¼ï¼š</strong><br>
                <code>element.innerHTML = formatTextWithLineBreaks(question.solution);</code>
            </div>
        </div>
    </div>

    <script>
        // æ–‡æœ¬æ¢è¡Œç¬¦å¤„ç†å·¥å…·å‡½æ•°
        function formatTextWithLineBreaks(text, useHTML = true) {
            if (!text || typeof text !== 'string') return '';
            
            if (useHTML) {
                return text.replace(/\\n/g, '<br>');
            } else {
                return text.replace(/\\n/g, '\n');
            }
        }

        // æµ‹è¯•æ•°æ®
        const testData = {
            "id": 35,
            "title": "è®¡ç®—é¢˜",
            "problem": "æœ‰ä¸€æ¡é‡‡ç”¨BLX-500å‹ç»ç¼˜å¯¼çº¿æ˜æ•·çš„220/380Vçš„TN-Sçº¿è·¯ï¼Œè®¡ç®—ç”µæµ100Aï¼Œå½“åœ°æœ€çƒ­æœˆå¹³å‡æ°”æ¸©ä¸º+25ÂºCã€‚\\næŒ‰å‘çƒ­æ¡ä»¶é€‰æ‹©çº¿è·¯çš„ç›¸çº¿ã€Nçº¿ã€PEçº¿æˆªé¢ã€‚",
            "solution": "æŒ‰å‘çƒ­æ¡ä»¶é€‰æ‹©å¯¼çº¿æˆªé¢ï¼š\\nç›¸çº¿ï¼š25å¹³æ–¹æ¯«ç±³\\nä¸­æ€§çº¿ï¼š16å¹³æ–¹æ¯«ç±³\\nPEçº¿ï¼š16å¹³æ–¹æ¯«ç±³\\n\\nè®¡ç®—è¿‡ç¨‹ï¼š\\n1. æŸ¥è¡¨ç¡®å®šè½½æµé‡\\n2. è€ƒè™‘æ¸©åº¦ä¿®æ­£ç³»æ•°\\n3. é€‰æ‹©åˆé€‚æˆªé¢"
        };

        // æ˜¾ç¤ºæµ‹è¯•æ•°æ®
        document.getElementById('testDataDisplay').textContent = JSON.stringify(testData, null, 2);

        // é—®é¢˜æ¼”ç¤ºï¼šä¸å¤„ç†æ¢è¡Œç¬¦
        document.getElementById('problemWithoutFix').textContent = testData.problem;
        document.getElementById('solutionWithoutFix').textContent = testData.solution;

        // è§£å†³æ–¹æ¡ˆæ¼”ç¤ºï¼šæ­£ç¡®å¤„ç†æ¢è¡Œç¬¦
        document.getElementById('problemWithFix').innerHTML = formatTextWithLineBreaks(testData.problem);
        document.getElementById('solutionWithFix').innerHTML = formatTextWithLineBreaks(testData.solution);

        // å®é™…æ•°æ®æµ‹è¯•
        function loadRealData() {
            const realDataContainer = document.getElementById('realDataTest');
            
            // æ¨¡æ‹Ÿä»JSONåŠ è½½çš„æ•°æ®
            const realQuestions = [
                {
                    "id": 32,
                    "title": "ç®€ç­”é¢˜",
                    "problem": "äº’æ„Ÿå™¨åˆ†ä¸ºç”µå‹å’Œç”µæµäº’æ„Ÿå™¨ï¼Œç®€è¿°å®ƒä»¬ä½¿ç”¨ä¸­çš„æ³¨æ„äº‹é¡¹",
                    "solution": "äº’æ„Ÿå™¨ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š\\n1. ç”µæµäº’æ„Ÿå™¨äºŒæ¬¡ä¾§ä¸å¾—å¼€è·¯ï¼Œç”µå‹äº’æ„Ÿå™¨äºŒæ¬¡ä¾§ä¸å¾—çŸ­è·¯ï¼›\\n2. ç”µå‹äº’æ„Ÿå™¨å’Œç”µæµäº’æ„Ÿå™¨äºŒæ¬¡ä¾§æœ‰ä¸€ç«¯å¿…é¡»æ¥åœ°ï¼›\\n3. ç”µå‹äº’æ„Ÿå™¨å’Œç”µæµäº’æ„Ÿå™¨åœ¨è¿æ¥æ—¶åº”æ³¨æ„å…¶ç«¯å­çš„ææ€§ã€‚"
                },
                {
                    "id": 34,
                    "title": "è®¡ç®—é¢˜",
                    "problem": "æ ¹æ®é¢˜ç›®å›¾ç‰‡å†…å®¹è¿›è¡Œè®¡ç®—ã€‚",
                    "solution": "æ ¹æ®è®¡ç®—ç»“æœï¼š\\n6.3/121KVï¼›110KVï¼›35KV"
                }
            ];

            let html = '';
            realQuestions.forEach((question, index) => {
                html += `
                    <div class="calculation-container" style="margin: 15px 0;">
                        <div class="calculation-title">${question.title} (ç¬¬${index + 1}é¢˜)</div>
                        <div class="calculation-problem">
                            ${formatTextWithLineBreaks(question.problem)}
                        </div>
                        <div class="calculation-solution">
                            <h4>è¯¦ç»†è§£ç­”</h4>
                            <div class="calculation-steps">
                                ${formatTextWithLineBreaks(question.solution)}
                            </div>
                        </div>
                    </div>
                `;
            });

            realDataContainer.innerHTML = html;
        }

        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œæµ‹è¯•
        window.addEventListener('load', function() {
            loadRealData();
            console.log('æ¢è¡Œç¬¦å¤„ç†æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
        });
    </script>
</body>
</html>
