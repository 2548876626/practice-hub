# 学习通题目答案提取器

一个专门用于提取学习通题目和答案的浏览器控制台脚本。

## 🚀 功能特点

- ✅ **自动提取题目** - 智能识别页面中的题目内容
- ✅ **提取答案信息** - 包括"我的答案"等答案信息
- ✅ **实时监控** - 自动检测页面变化，持续提取
- ✅ **去重处理** - 自动过滤重复的题目
- ✅ **可视化界面** - 友好的控制面板和结果展示
- ✅ **数据导出** - 支持JSON格式导出
- ✅ **一键控制** - 随时启动/停止提取

## 📋 使用方法

### 1. 运行脚本
1. 在学习通题目页面按 **F12** 打开浏览器控制台
2. 复制 `xuexitong-question-extractor.js` 文件中的所有代码
3. 粘贴到控制台中并按回车执行
4. 右上角会出现紫色的控制面板

### 2. 开始提取
1. 点击 **"开始提取"** 按钮
2. 脚本会自动检测当前页面的题目和答案
3. 实时显示已提取的题目数量
4. 可以随时点击 **"停止提取"** 停止

### 3. 查看结果
1. 点击 **"查看结果"** 按钮
2. 弹出结果窗口，显示所有提取到的题目和答案
3. 每个题目包含：
   - 题目内容
   - 选项列表（A、B、C、D等）
   - 正确答案
   - 我的答案
   - 提取时间
   - 容器索引

### 4. 导出数据
1. 在结果窗口中点击 **"导出数据"** 按钮
2. 自动下载JSON格式的数据文件
3. 文件名格式：`学习通题目答案_日期.json`

## 🎯 支持的元素识别

### 批量题目提取
脚本会自动识别页面上的所有题目容器：
- **主要识别** - `.TiMu.singleQuesId` (学习通标准题目容器)
- **备用识别** - `.TiMu`, `[class*="TiMu"]`, `[class*="question"]`
- **智能遍历** - 自动遍历所有找到的题目容器
- **去重处理** - 自动过滤重复的题目内容

### 题目内容识别
在每个题目容器内查找：
- `.Py_title` - 题目标题
- `.question-title` - 题目标题
- `[class*="title"]` - 包含title的类
- **智能文本识别** - 自动识别包含问号、关键词的题目文本

### 答案识别
**全局答案路径**（优先使用）：
```javascript
document.querySelector("#ZyBottom > div:nth-child(2) > div.Py_answer.clearfix > span:nth-child(1)")
```

**容器内答案识别**：
- `.Py_answer` - 答案类
- `[class*="answer"]` - 包含answer的类
- `.my-answer` - 我的答案类

## 📊 数据格式

提取的数据包含以下字段：
```json
{
  "id": 1,
  "question": "下列哪个选项是正确的？",
  "options": "A. 选项A\nB. 选项B\nC. 选项C\nD. 选项D",
  "answer": "正确答案：B",
  "myAnswer": "我的答案：B",
  "timestamp": "2024-01-01 12:00:00",
  "url": "https://mooc1-2.chaoxing.com/...",
  "containerIndex": 1
}
```

## ⚙️ 高级功能

### 自动去重
- 自动检测重复的题目和答案组合
- 避免重复提取相同内容

### 智能识别
- 支持多种题目格式
- 自动适应不同的页面结构
- 容错处理，提高提取成功率

### 实时监控
- 每2秒自动检查页面变化
- 适合在做题过程中持续提取
- 支持翻页后继续提取

## 🔧 自定义配置

如果需要修改提取间隔时间，可以在代码中调整：
```javascript
// 修改这一行的数值（毫秒）
extractInterval = setInterval(extractCurrentQuestion, 2000); // 2秒间隔
```

如果需要添加新的选择器，可以在相应数组中添加：
```javascript
const questionSelectors = [
    '.TiMu',
    '.question-title',
    // 在这里添加新的选择器
];
```

## 🐛 常见问题

**Q: 提取不到题目怎么办？**
A: 检查控制台是否有错误信息，可能需要根据具体页面结构调整选择器。

**Q: 答案格式不对？**
A: 脚本会提取原始的答案文本，包括"我的答案：B"这样的格式。

**Q: 可以在移动端使用吗？**
A: 建议在桌面端浏览器使用，移动端控制台操作不便。

**Q: 数据安全吗？**
A: 所有数据都在本地处理，不会上传到任何服务器。

## 📝 更新日志

- **v1.0** - 初始版本
  - 支持题目和答案提取
  - 可视化控制面板
  - 数据导出功能
  - 自动去重处理

## 💡 使用建议

1. **在开始做题前启动脚本** - 这样可以完整记录整个做题过程
2. **定期查看结果** - 确保提取正常工作
3. **及时导出数据** - 避免浏览器关闭后数据丢失
4. **根据需要调整** - 如果某些题目格式识别不准确，可以联系调整

---

**免责声明：** 此工具仅供学习和研究使用，请遵守学校相关规定。
